<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Whatchya Want?</title>
    <meta property="og:description" content="Shop the latest dupes, gifts, and unique finds." />
  <meta property="og:image" content="https://whatchyawant.com/preview.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="/images/logo.png" />
  <style>
    :root{
      --bg:#f5f5f5;
      --surface:#ffffff;
      --chip:#d6ebff;
      --chip-hover:#c1e0ff;
      --chip-active:#ff8fc7;
      --text:#111;
      --muted:#666;
      --shadow:0 2px 6px rgba(0,0,0,.1);
      --shadow-strong:0 4px 12px rgba(0,0,0,.18);
      --radius:14px;
      --gap:16px;
    }
    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      overflow-x:hidden; /* prevent side scroll */
      background:var(--bg);
      color:var(--text);
      font-family: "Inter Tight", Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    header{
      width:100%;
      background:var(--surface);
      box-shadow:var(--shadow);
      position:sticky;
      top:0;
      z-index:10;
    }
    .head-inner{
      max-width:1600px;
      margin:0 auto;
      padding:10px 16px;
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      align-items:center;
      gap:8px;
    }
    .title{
      grid-column:2;
      text-align:center;
      font-size:1.6rem;
      margin:0;
      font-weight:700;
    }
    .country{
      grid-column:3;
      justify-self:end;
      appearance:none;
      background:transparent;
      border:none;
      font-size:22px;
      cursor:pointer;
      padding:6px 8px;
      line-height:1;
    }

    .tools{
      width:100%;
      background:var(--surface);
      box-shadow:var(--shadow);
    }
    .tools-inner{
      max-width:1600px;
      margin:0 auto;
      padding:14px 16px 10px 16px;
    }
    .search-wrap{
      display:flex;
      justify-content:center;
      margin:4px 0 10px 0;
    }
    #search{
      width:100%;
      min-width:240px;
      max-width:1000px;
      padding:10px 14px;
      border:1px solid #ddd;
      border-radius:999px;
      outline:none;
      font-size:1rem;
      box-shadow: inset 0 1px 3px rgba(0,0,0,.08);
      background:#fff;
    }

    .filters{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:8px;
      padding:6px 0 12px 0;
    }
    .chip{
      padding:7px 14px;
      border:none;
      border-radius:999px;
      background:var(--chip);
      font-size:.92rem;
      cursor:pointer;
      transition:transform .12s ease, background .15s ease, box-shadow .15s ease;
      text-transform:capitalize;
    }
    .chip:hover{ background:var(--chip-hover); }
    .chip.active{
      background:var(--chip-active);
      color:#fff;
      box-shadow:var(--shadow-strong);
      transform: translateY(-1px);
    }

    .filter-desc{
      max-width:900px;
      margin:0 auto 10px auto;
      padding:0 10px 14px 10px;
      text-align:center;
      color:var(--muted);
      font-size:.95rem;
    }

    .content{ width:100%; }
    .content-inner{
      max-width:1600px;
      margin:0 auto;
      padding:16px;
      overflow-x:hidden; /* extra safety */
    }
    .products{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:var(--gap);
      align-items:stretch;
      width:100%;
      max-width:100%; /* prevent overflow */
    }
    @media (max-width:1300px){ .products{ grid-template-columns: repeat(4, 1fr); } }
    @media (max-width:1000px){ .products{ grid-template-columns: repeat(3, 1fr); } }
    @media (max-width:720px){ .products{ grid-template-columns: repeat(2, 1fr); } }

    .card{
      display:flex;
      flex-direction:column;
      background:#fff;
      border-radius:var(--radius);
      text-decoration:none;
      color:inherit;
      box-shadow:var(--shadow);
      transition:transform .12s ease, box-shadow .12s ease;
      height:100%;
      min-width:0; /* fix overflow from flex/grid */
    }
    .card:hover{
      transform: translateY(-3px);
      box-shadow:var(--shadow-strong);
    }

    /* square image wrapper */
    .card-img-wrap {
      position: relative;
      width: 100%;
      padding-top: 100%; /* forces a square */
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
      overflow: hidden;
    }
    .card-img-wrap img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain; /* show whole image with white borders */
      background: #fff;
    }

    .card-name{
      margin-top:auto;
      background:#f8f8f8;
      padding:12px 10px;
      min-height:54px;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      font-weight:600;
      word-wrap:break-word;
    }
  </style>
</head>
<body>
  <header>
    <div class="head-inner">
      <div></div>
      <h1 class="title">Whatchya Want?</h1>
      <select id="countrySelect" class="country" aria-label="Country">
        <option value="us">ðŸ‡ºðŸ‡¸</option>
        <option value="ca">ðŸ‡¨ðŸ‡¦</option>
      </select>
    </div>
  </header>

  <section class="tools">
    <div class="tools-inner">
      <div class="search-wrap">
        <input id="search" type="text" placeholder="Search productsâ€¦"/>
      </div>
      <div class="filters" id="filterBar"></div>
      <div class="filter-desc" id="filterDesc" style="display:none;"></div>
    </div>
  </section>

  <main class="content">
    <div class="content-inner">
      <div id="productsContainer" class="products"></div>
    </div>
  </main>
  <span> This site may contain affiliate links. As an amazon associate I earn on qualifying purchases</span>

  <script src="products.js"></script>
  <script>
    const visibleFilters = [
      "tiktok","cool","girls","boys","women","men","makeup","skincare",
      "Aritzia Dupes","Lulu Dupes","TankAir Dupe","Skims Dupe", "baby", "Cooking",
      "Nina Pool","Buy It For Life"
    ];
    const tagSynonyms = {
      "cooking":"cook",
      "aritzia dupes":"aritzia dupe","aritzia dupe":"aritzia dupe","aritzia":"aritzia dupe",
      "lulu dupes":"lululemon dupe","lulu dupe":"lululemon dupe","lululemon dupes":"lululemon dupe","lululemon dupe":"lululemon dupe","lulu":"lululemon dupe",
      "tankair dupe":"tank air dupe","tank air dupes":"tank air dupe","tankair dupes":"tank air dupe","tank air":"tank air dupe","tankair":"tank air dupe",
      "skims dupes":"skims dupe","skims dupe":"skims dupe","skims":"skims dupe",
      "woman":"women","women":"women","girl":"girls","girls":"girls","man":"men","men":"men","boy":"boys","boys":"boys",
      "skin care":"skincare",
      "buy it for life":"bifl","buy-it-for-life":"bifl","bifl":"bifl",
      "nina":"nina pool","ninapool":"nina pool","nina pool":"nina pool"
    };
    function normalizeTag(t){
      if(!t) return "";
      const k = String(t).trim().toLowerCase();
      return tagSynonyms[k] || k;
    }
    const filterMap = new Map([
      ["tiktok","tiktok"],["cool","cool"],["girls","girls"],["boys","boys"],["women","women"],["men","men"],
      ["makeup","makeup"],["skincare","skincare"],["Aritzia Dupes","aritzia dupe"],["Lulu Dupes","lululemon dupe"],
      ["TankAir Dupe","tank air dupe"],["Skims Dupe","skims dupe"],["baby", "baby"],["Cooking","cook"],["Nina Pool","nina pool"],["Buy It For Life","bifl"]
    ]);

    let country="us";
    const urlParams=new URLSearchParams(window.location.search);
    const initialTagParam=normalizeTag(urlParams.get("tag")||"");
    const canonicalTags=Array.from(filterMap.values());
    let activeTag=canonicalTags.includes(initialTagParam)?initialTagParam:"";

    function renderFilters(){
      const bar=document.getElementById("filterBar");
      bar.innerHTML="";
      for(const label of visibleFilters){
        const canonical=filterMap.get(label);
        const btn=document.createElement("button");
        btn.className="chip"+(activeTag===canonical?" active":"");
        btn.textContent=label;
        btn.onclick=()=>{
          activeTag=(activeTag===canonical)?"":canonical;
          const params=new URLSearchParams(window.location.search);
          if(activeTag){params.set("tag",activeTag);}else{params.delete("tag");}
          history.replaceState({},"",`${location.pathname}?${params}`);
          renderFilters();
          renderDescription();
          renderProducts();
        };
        bar.appendChild(btn);
      }
    }

    function renderDescription(){
      const desc=document.getElementById("filterDesc");
      if(activeTag==="nina pool"){
        desc.style.display="";
        desc.textContent="Nina Pool picks: budget-friendly skincare swaps and finds loved by Nina. ðŸ’–";
      }else if(activeTag==="bifl"){
        desc.style.display="";
        desc.textContent="BIFL items are products you can guarantee will last and work well. They tend to cost more but theoretically you just need to buy one to last a lifetime.";
      }else{
        desc.style.display="none";
        desc.textContent="";
      }
    }

    function productMatches(p, searchVal){
      const name=p.name.toLowerCase();
      const tags=(p.tags||[]).map(normalizeTag);
      const matchesSearch=!searchVal||name.includes(searchVal)||tags.some(t=>t.includes(searchVal));
      const matchesFilter=!activeTag||tags.includes(activeTag);
      return matchesSearch&&matchesFilter;
    }

    function renderProducts(){
      const wrap=document.getElementById("productsContainer");
      wrap.innerHTML="";
      const q=document.getElementById("search").value.trim().toLowerCase();
      products.filter(p=>productMatches(p,q)).forEach(p=>{
        const a=document.createElement("a");
        a.className="card";
        a.target="_blank";
        let url=p.link;
        if(country==="ca"&&p.link_ca){url=p.link_ca;}
        a.href=url;
        a.innerHTML=`
          <div class="card-img-wrap">
            <img src="${p.img}" alt="${p.name}">
          </div>
          <div class="card-name">${p.name}</div>
        `;
        wrap.appendChild(a);
      });
    }

    document.getElementById("search").addEventListener("input",renderProducts);
    document.getElementById("countrySelect").addEventListener("change",(e)=>{country=e.target.value;renderProducts();});

    renderFilters();
    renderDescription();
    renderProducts();
  </script>
</body>
</html>
